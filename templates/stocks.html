{% extends "form.html" %}
{% block content2 %}
<table class="table table-striped table-hover sticky">
    <thead class="thead-dark">
        <tr>
            <th class="align-middle" scope="col">#</th>
            <th class="align-middle" scope="col">Stock
                <button type="submit" class="btn btn-outline-secondary rounded-circle" name="name">^</button>
            </th>
            <th class="align-middle" scope="col">Price
                <button type="submit" class="btn btn-outline-secondary rounded-circle" name="price">^</button>
            </th>
            <th class="align-middle" scope="col">Change
                <button type="submit" class="btn btn-outline-secondary rounded-circle" name="change">^</button>
            </th>
            <th class="align-middle" scope="col">Change perc
                <button type="submit" class="btn btn-outline-secondary rounded-circle" name="perc">^</button>
            </th>
            <th class="align-middle" scope="col">Opening
                <button type="submit" class="btn btn-outline-secondary rounded-circle" name="opening">^</button>
            </th>
            <th class="align-middle" scope="col">Max
                <button type="submit" class="btn btn-outline-secondary rounded-circle" name="max">^</button>
            </th>
            <th class="align-middle" scope="col">Min
                <button type="submit" class="btn btn-outline-secondary rounded-circle" name="min">^</button>
            </th>
            <th class="align-middle" scope="col">Buy/Sell</th>
            <th class="align-middle" scope="col">O/V</th>
            <th class="align-middle" scope="col">Profit</th>
        </tr>
    </thead>
    <tbody id="stocks">
        {% for stock in stocks %}
        <tr>
            <td class="align-middle">{{forloop.counter}}</td>
            <td class="align-middle" id="name{{stock.id}}">{{stock.name}}</td>
            {% if stock.change > 0 %}
            <td class="align-middle" style="color: rgb(0, 200, 0);" id="price{{stock.id}}">{{stock.price}}</td>
            {% elif stock.change == 0 %}
            <td class="align-middle" id="price{{stock.id}}">{{stock.price}}</td>
            {% else %}
            <td class="align-middle" style="color: rgb(225, 0, 0);"  id="price{{stock.id}}">{{stock.price}}</td>
            {% endif %}

            {% if stock.change > 0 %}
            <td class="align-middle" style="color: rgb(0, 200, 0);" id="change{{stock.id}}">{{stock.change}}</td>
            {% elif stock.change == 0 %}
            <td class="align-middle" id="change{{stock.id}}">{{stock.change}}</td>
            {% else %}
            <td class="align-middle" style="color: rgb(225, 0, 0);"  id="change{{stock.id}}">{{stock.change}}</td>
            {% endif %}

            {% if stock.change > 0 %}
            <td class="align-middle" style="color: rgb(0, 200, 0);" id="perc{{stock.id}}">{{stock.perc}}%</td>
            {% elif stock.change == 0 %}
            <td class="align-middle" id="perc{{stock.id}}">{{stock.perc}}%</td>
            {% else %}
            <td class="align-middle" style="color: rgb(225, 0, 0);"  id="perc{{stock.id}}">{{stock.perc}}%</td>
            {% endif %}
            <td class="align-middle" id="opening{{stock.id}}">{{stock.opening}}</td>
            <td class="align-middle" id="max{{stock.id}}">{{stock.max}}</td>
            <td class="align-middle" id="min{{stock.id}}">{{stock.min}}</td>
            <td class="align-middle">
                <form class="form-inline">
                    <div>
                        <input type="number" class="form-control" id="Stock_Input{{stock.id}}" min="0" max="100000" value="0">
                        <button id="buy_button{{stock.id}}" type="button" class="btn btn-outline-success" row_id="{{stock.id}}" member_id="{{stock.id}}">B</button>
                        <button id="sell_button{{stock.id}}" type="button" class="btn btn-outline-danger" row_id="{{stock.id}}" member_id="{{stock.id}}">S</button>
                    </div>
                </form>
            </td>
            {% load get_item %}
            {% if bought_stocks|isnt_empty:forloop.counter %}
                <td class="align-middle">
                    <div id="quantity{{stock.id}}">Owned: {% get_value bought_stocks forloop.counter 'quantity' %}</div>
                    <div id="value{{stock.id}}">Value: {% get_value bought_stocks forloop.counter 'value' %}$</div>
                </td>
                {% if stock.change > 0 %}
                <td class="align-middle" style="color: rgb(0, 200, 0);" id="profit{{stock.id}}">{% get_value bought_stocks forloop.counter 'profit' %}%</td>
                {% elif stock.change == 0 %}
                <td class="align-middle" id="profit{{stock.id}}">{% get_value bought_stocks forloop.counter 'profit' %}%</td>
                {% else %}
                <td class="align-middle" style="color: rgb(225, 0, 0);"  id="profit{{stock.id}}">{% get_value bought_stocks forloop.counter 'profit' %}%</td>
                {% endif %}
            {% else  %}
                <td class="align-middle">
                    <div id="quantity{{stock.id}}">Owned: 0</div>
                    <div id="value{{stock.id}}">Value: 0$</div>
                </td>
                <td class="align-middle" id="profit{{stock.id}}">0%</td>
            {% endif %}
        {% endfor %}
    </tbody>
</table>
{% endblock %}